"use strict";var popupResume=document.querySelector(".modal__resume"),close=popupResume.querySelector(".modal__close"),resumeButtons=document.querySelectorAll(".vacancy__button"),vacancyToggles=document.querySelectorAll(".vacancy__item button"),thumbnailsSlides=document.querySelectorAll(".slide-list__slide-btn"),slides=document.querySelectorAll(".slide-list__item"),activeMenu=document.querySelectorAll(".site-navigation__item--active"),resumeForm=document.querySelector(".resume__form"),inputPhone=resumeForm.querySelector("#resume-phone"),inputName=resumeForm.querySelector("#resume-name"),inputEMail=resumeForm.querySelector("#resume-e-mail"),inputFile=resumeForm.querySelector("#resume-file"),fileLoaderHandler=document.querySelector(".file-loader_handler"),fileLoaderButton=document.querySelector(".file-loader_button"),fileLoaderDeleteFile=document.querySelector(".file-loader_delete-file"),buttonSubmit=document.querySelector('button[type="submit"]');String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var i=this.toString();("number"!=typeof t||!isFinite(t)||Math.floor(t)!==t||t>i.length)&&(t=i.length),t-=e.length;var n=i.indexOf(e,t);return-1!==n&&n===t}),inputFile.addEventListener("change",function(e){if(e.target.files&&1<=e.target.files.length){var t=e.target.files[0].name.toLowerCase();["txt","doc","docx","pdf"].some(function(e){return t.endsWith(e)})?(fileLoaderHandler.classList.add("display-none"),fileLoaderButton.children[0].textContent=t,fileLoaderButton.classList.remove("file-loader_button--error"),fileLoaderButton.classList.remove("display-none"),fileLoaderDeleteFile.classList.remove("display-none"),noMistake()&&buttonSubmit.classList.remove("resume__mistake")):(inputFile.value="",fileLoaderButton.classList.remove("display-none"),fileLoaderButton.children[0].textContent="Не удалось загрузить файл",fileLoaderButton.classList.add("file-loader_button--error"),fileLoaderHandler.textContent="попробовать снова?",fileLoaderHandler.classList.add("file-loader_handler--again"),fileLoaderDeleteFile.classList.add("display-none"),buttonSubmit.classList.add("resume__mistake"))}}),fileLoaderDeleteFile.addEventListener("click",function(){inputFile.value="",fileLoaderHandler.classList.remove("display-none"),fileLoaderHandler.textContent="прикрепите резюме",fileLoaderHandler.classList.remove("file-loader_handler--again"),fileLoaderButton.children[0].textContent="",fileLoaderButton.classList.add("display-none"),fileLoaderDeleteFile.classList.add("display-none"),buttonSubmit.classList.add("resume__mistake")});var maskPhoneOptions={mask:"+{7}(000)000-00-00"};window.mask=new window.IMask(inputPhone,maskPhoneOptions),inputPhone.addEventListener("click",function(){maskPhoneOptions={mask:"+{7}(000)000-00-00",lazy:!1},window.mask=new window.IMask(inputPhone,maskPhoneOptions)});var deleteInvalid=function(e){e.classList.contains("resume__invalid")&&e.classList.remove("resume__invalid");var t=resumeForm.querySelector("label[for = "+e.id+"]");t.classList.contains("resume__invalid--"+e.id)&&t.classList.remove("resume__invalid--"+e.id)},checkInputCaption=function(e){e.value?e.parentNode.classList.add("resume__input-caption"):e.parentNode.classList.contains("resume__input-caption")&&e.parentNode.classList.remove("resume__input-caption")},noMistake=function(){var e=!0;return!inputName.classList.contains("resume__invalid")&&""!==inputName.value||(e=!1),!inputEMail.classList.contains("resume__invalid")&&""!==inputEMail.value||(e=!1),!inputPhone.classList.contains("resume__invalid")&&""!==inputPhone.value||(e=!1),fileLoaderDeleteFile.classList.contains("display-none")&&(e=!1),e};inputName.addEventListener("blur",function(){deleteInvalid(inputName),inputName.checkValidity(),checkInputCaption(inputName),noMistake()&&buttonSubmit.classList.remove("resume__mistake")}),inputEMail.addEventListener("blur",function(){deleteInvalid(inputEMail),inputEMail.checkValidity(),checkInputCaption(inputEMail),noMistake()&&buttonSubmit.classList.remove("resume__mistake")}),inputPhone.addEventListener("blur",function(){deleteInvalid(inputPhone),inputPhone.checkValidity(),checkInputCaption(inputPhone),noMistake()&&buttonSubmit.classList.remove("resume__mistake")}),resumeForm.addEventListener("invalid",function(e){buttonSubmit.classList.add("resume__mistake");var t=resumeForm.querySelector("label[for="+e.target.id+"]");e.target.value&&(e.target.classList.add("resume__invalid"),t.classList.add("resume__invalid--"+e.target.id))},!0);var closePopup=function(e){popupResume&&(e.preventDefault(),popupResume.classList.contains("modal__show")&&popupResume.classList.remove("modal__show"))};close.addEventListener("click",closePopup),popupResume.addEventListener("click",function(e){e.target===e.currentTarget&&closePopup(e)}),window.addEventListener("keydown",function(e){27===e.keyCode&&closePopup(e)}),resumeButtons&&Array.prototype.forEach.call(resumeButtons,function(e){var t=e.parentNode.querySelector(".vacancy__item-header").textContent;e.addEventListener("click",function(){popupResume.classList.add("modal__show"),popupResume.querySelector(".resume__vacancy-name").textContent=t,inputName.focus()})}),vacancyToggles&&vacancyToggles.forEach(function(e){e.addEventListener("click",function(){e.parentNode.classList.toggle("vacancy__item--closed"),e.children[0].textContent=e.parentNode.classList.contains("vacancy__item--closed")?"подробнее":"скрыть"})});var addThumbnailClickHandler=function(t){thumbnailsSlides&&slides&&thumbnailsSlides[t].addEventListener("click",function(){if(!thumbnailsSlides[t].classList.contains("slide-list__slide-btn--active")){for(var e=0;e<slides.length;e++)slides[e].classList.add("display-none"),slides[e].classList.add("opacity-none"),thumbnailsSlides[e].classList.remove("slide-list__slide-btn--active");slides[t].classList.remove("display-none"),setTimeout(function(){slides[t].classList.remove("opacity-none")},100),thumbnailsSlides[t].classList.add("slide-list__slide-btn--active")}})};if(thumbnailsSlides)for(var i=0;i<thumbnailsSlides.length;i++)addThumbnailClickHandler(i);activeMenu&&setTimeout(function(){activeMenu.forEach(function(e){e.classList.add("underline")})},100);